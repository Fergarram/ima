function useTags(){let e="undefined"==typeof window;return e?new Proxy({},{get:static_tag_generator}):new Proxy({},{get:tag_generator})}"undefined"==typeof window&&(global.document={createElement:()=>({}),createTextNode:()=>({}),createComment:()=>({})},console.warn("Trying to use client-side tags on server."));var tag_generator=(e,t)=>(...e)=>{let a={},r=e;if(e.length>0){let n=e[0];if("string"==typeof n||"number"==typeof n||n instanceof HTMLElement||"function"==typeof n)r=e;else if(Object.getPrototypeOf(n??0)===Object.prototype){let[i,...c]=e,{is:o,...l}=i;a=l,r=c}}let s=document.createElement(t);for(let[u,f]of Object.entries(a)){if(u.startsWith("on")&&"function"==typeof f){let v=u.substring(2).toLowerCase();s.addEventListener(v,f);continue}if("function"==typeof f&&!u.startsWith("on")){setupReactiveAttr(s,u,f);continue}!0===f?s.setAttribute(u,""):!1!==f&&null!=f&&s.setAttribute(u,String(f))}for(let m of r.flat(1/0))if(null!=m){if(m instanceof Node)s.appendChild(m);else if("function"==typeof m){let p=setupReactiveNode(m);s.appendChild(p)}else s.appendChild(document.createTextNode(String(m)))}return s},tags=new Proxy({},{get:tag_generator}),reactive_markers=[],reactive_callbacks=[],reactive_prev_values=[],reactive_count=0,reactive_attr_elements=[],reactive_attr_names=[],reactive_attr_callbacks=[],reactive_attr_prev_values=[],reactive_attr_count=0,animation_frame_requested=!1,frame_time=0;function updateReactiveComponents(){animation_frame_requested=!1;let e=performance.now();for(let t=0;t<reactive_attr_count;t++){let a=reactive_attr_elements[t],r=reactive_attr_names[t],n=reactive_attr_callbacks[t];if(!a.isConnected)continue;let i=n();i!==reactive_attr_prev_values[t]&&(!0===i?a.setAttribute(r,"true"):!1===i?a.setAttribute(r,"false"):null==i?a.removeAttribute(r):a.setAttribute(r,String(i)),reactive_attr_prev_values[t]=i)}for(let c=0;c<reactive_count;c++){let o=reactive_markers[c],l=reactive_callbacks[c];if(!o.isConnected)continue;let s=l(),u=o.previousSibling;if(!u)continue;let f=!1;if(s instanceof Node)u instanceof HTMLElement&&s instanceof HTMLElement?u.outerHTML!==s.outerHTML&&(f=!0):f=!0;else{let v=String(s??"");f=u.nodeType!==Node.TEXT_NODE||u.textContent!==v}if(f){let m;m=s instanceof Node?s:document.createTextNode(String(s??"")),u.replaceWith(m)}}frame_time=performance.now()-e,(reactive_count>0||reactive_attr_count>0)&&animationFrame()}function getFrameTime(){return frame_time}function animationFrame(){!animation_frame_requested&&(reactive_count>0||reactive_attr_count>0)&&(animation_frame_requested=!0,requestAnimationFrame(updateReactiveComponents))}function setupReactiveNode(e){let t=reactive_count++,a=document.createComment(`reactive-${t}`),r=e(),n;n=r instanceof Node?r:document.createTextNode(String(r??""));let i=document.createDocumentFragment();return i.appendChild(n),i.appendChild(a),reactive_markers[t]=a,reactive_callbacks[t]=e,reactive_prev_values[t]=n,animationFrame(),i}function setupReactiveAttr(e,t,a){let r=reactive_attr_count++,n=a();!0===n?e.setAttribute(t,""):!1!==n&&null!=n&&e.setAttribute(t,String(n)),reactive_attr_elements[r]=e,reactive_attr_names[r]=t,reactive_attr_callbacks[r]=a,reactive_attr_prev_values[r]=n,animationFrame()}var static_tag_generator=(e,t)=>(...e)=>{let a={},r=e;if(e.length>0){let n=e[0];if("string"==typeof n||"number"==typeof n||"function"==typeof n)r=e;else if(Object.getPrototypeOf(n??0)===Object.prototype){let[i,...c]=e,{is:o,...l}=i;a=l,r=c}}let s=`<${t}`;for(let[u,f]of Object.entries(a)){if(u.startsWith("on")||"function"==typeof f)continue;let v="className"===u?"class":u;if(!0===f)s+=` ${v}`;else if(!1!==f&&null!=f){let m=String(f).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;");s+=` ${v}="${m}"`}}let p=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]);if(p.has(t))return s+"/>";for(let g of(s+=">",r.flat(1/0)))null!=g&&("function"==typeof g?s+=String(g()):s+=String(g));return s+`</${t}>`},staticTags=new Proxy({},{get:static_tag_generator});export{useTags,tags,staticTags,getFrameTime};
